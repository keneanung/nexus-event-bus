{"name":"eventbus","enabled":true,"description":"Event Bus similar to the Nexus function system, but available outside of the GUI","type":"group","items":[{"name":"onLoad","id":2,"type":"function","enabled":true,"code":"(()=>{\"use strict\";var t={517:function(t,r,e){var n=this&&this.__awaiter||function(t,r,e,n){return new(e||(e=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var r;t.done?o(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r)}))).then(a,u)}s((n=n.apply(t,r||[])).next())}))},o=this&&this.__generator||function(t,r){var e,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(e=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=r.call(t,a)}catch(t){i=[6,t],n=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(r,\"__esModule\",{value:!0}),r.EventBus=void 0;var i=e(614),a=function(){for(var t=new Uint8Array(16),r=0;r<t.length;r++)t[r]=Math.floor(255*Math.random());return t},u=function(){function t(){this.subscriptions={},this.subscriptionsToAll={}}return t.prototype.subscribe=function(t,r,e,n){var o;void 0===e&&(e=(0,i.v4)({rng:a})),void 0===n&&(n=!1),\"*\"===t?o=this.subscriptionsToAll:(void 0===this.subscriptions[t]&&(this.subscriptions[t]={}),o=this.subscriptions[t]),this.subscribeToEvent(o,r,t,e,n)},t.prototype.subscribeToEvent=function(t,r,e,n,o){if(void 0!==t[n]&&!o)throw new Error('Callback \"'.concat(n,'\" already exists for event \"').concat(e,'\"'));t[n]=r},t.prototype.raise=function(t,r){return n(this,void 0,void 0,(function(){var e;return o(this,(function(n){return e=this.subscriptions[t],this.runCallbacks(e,r),this.runCallbacks(this.subscriptionsToAll,r),[2]}))}))},t.prototype.runCallbacks=function(t,r){var e=this;void 0!==t&&Object.values(t).forEach((function(t){return n(e,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t(r)];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),console.error(e),[3,3];case 3:return[2]}}))}))}))},t.prototype.unsubscribe=function(t,r){var e;if(\"*\"===t)e=this.subscriptionsToAll;else{if(void 0===this.subscriptions[t])return;e=this.subscriptions[t]}this.unsubscribeFromEvent(e,r)},t.prototype.unsubscribeFromEvent=function(t,r){if(\"string\"==typeof r)delete t[r];else for(var e=0,n=Object.keys(t);e<n.length;e++){var o=n[e];t[o]===r&&delete t[o]}},t.prototype.getSubscribers=function(t){var r=this,e=[],n=function(t,r){e.push({callback:r[t],name:t})};if(\"*\"!==t){var o=this.subscriptions[t];void 0!==o&&Object.keys(o).forEach((function(t){return n(t,o)}))}return Object.keys(this.subscriptionsToAll).forEach((function(t){return n(t,r.subscriptionsToAll)})),e},t}();r.EventBus=u},607:function(t,r,e){var n=this&&this.__createBinding||(Object.create?function(t,r,e,n){void 0===n&&(n=e);var o=Object.getOwnPropertyDescriptor(r,e);o&&!(\"get\"in o?!r.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,o)}:function(t,r,e,n){void 0===n&&(n=e),t[n]=r[e]}),o=this&&this.__exportStar||function(t,r){for(var e in t)\"default\"===e||Object.prototype.hasOwnProperty.call(r,e)||n(r,t,e)};Object.defineProperty(r,\"__esModule\",{value:!0}),o(e(517),r)},122:function(t,r,e){var n=this&&this.__awaiter||function(t,r,e,n){return new(e||(e=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var r;t.done?o(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r)}))).then(a,u)}s((n=n.apply(t,r||[])).next())}))},o=this&&this.__generator||function(t,r){var e,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(e=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=r.call(t,a)}catch(t){i=[6,t],n=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(r,\"__esModule\",{value:!0});var i=e(607);console.log(\"loading event bus...\");var a=new i.EventBus;a.subscribe(\"onGMCP\",(function(t){return n(void 0,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,a.raise(t.gmcp_method,t.gmcp_args)];case 1:return r.sent(),[2]}}))}))})),r.default=a,console.log(\"event bus loaded.\")},614:(t,r,e)=>{var n;e.r(r),e.d(r,{NIL:()=>I,parse:()=>b,stringify:()=>l,v1:()=>d,v3:()=>O,v4:()=>U,v5:()=>j,validate:()=>u,version:()=>T});var o=new Uint8Array(16);function i(){if(!n&&!(n=\"undefined\"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||\"undefined\"!=typeof msCrypto&&\"function\"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");return n(o)}const a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(t){return\"string\"==typeof t&&a.test(t)};for(var s=[],c=0;c<256;++c)s.push((c+256).toString(16).substr(1));const l=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(s[t[r+0]]+s[t[r+1]]+s[t[r+2]]+s[t[r+3]]+\"-\"+s[t[r+4]]+s[t[r+5]]+\"-\"+s[t[r+6]]+s[t[r+7]]+\"-\"+s[t[r+8]]+s[t[r+9]]+\"-\"+s[t[r+10]]+s[t[r+11]]+s[t[r+12]]+s[t[r+13]]+s[t[r+14]]+s[t[r+15]]).toLowerCase();if(!u(e))throw TypeError(\"Stringified UUID is invalid\");return e};var f,p,v=0,h=0;const d=function(t,r,e){var n=r&&e||0,o=r||new Array(16),a=(t=t||{}).node||f,u=void 0!==t.clockseq?t.clockseq:p;if(null==a||null==u){var s=t.random||(t.rng||i)();null==a&&(a=f=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==u&&(u=p=16383&(s[6]<<8|s[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),d=void 0!==t.nsecs?t.nsecs:h+1,b=c-v+(d-h)/1e4;if(b<0&&void 0===t.clockseq&&(u=u+1&16383),(b<0||c>v)&&void 0===t.nsecs&&(d=0),d>=1e4)throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");v=c,h=d,p=u;var y=(1e4*(268435455&(c+=122192928e5))+d)%4294967296;o[n++]=y>>>24&255,o[n++]=y>>>16&255,o[n++]=y>>>8&255,o[n++]=255&y;var g=c/4294967296*1e4&268435455;o[n++]=g>>>8&255,o[n++]=255&g,o[n++]=g>>>24&15|16,o[n++]=g>>>16&255,o[n++]=u>>>8|128,o[n++]=255&u;for(var w=0;w<6;++w)o[n+w]=a[w];return r||l(o)},b=function(t){if(!u(t))throw TypeError(\"Invalid UUID\");var r,e=new Uint8Array(16);return e[0]=(r=parseInt(t.slice(0,8),16))>>>24,e[1]=r>>>16&255,e[2]=r>>>8&255,e[3]=255&r,e[4]=(r=parseInt(t.slice(9,13),16))>>>8,e[5]=255&r,e[6]=(r=parseInt(t.slice(14,18),16))>>>8,e[7]=255&r,e[8]=(r=parseInt(t.slice(19,23),16))>>>8,e[9]=255&r,e[10]=(r=parseInt(t.slice(24,36),16))/1099511627776&255,e[11]=r/4294967296&255,e[12]=r>>>24&255,e[13]=r>>>16&255,e[14]=r>>>8&255,e[15]=255&r,e};function y(t,r,e){function n(t,n,o,i){if(\"string\"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var r=[],e=0;e<t.length;++e)r.push(t.charCodeAt(e));return r}(t)),\"string\"==typeof n&&(n=b(n)),16!==n.length)throw TypeError(\"Namespace must be array-like (16 iterable integer values, 0-255)\");var a=new Uint8Array(16+t.length);if(a.set(n),a.set(t,n.length),(a=e(a))[6]=15&a[6]|r,a[8]=63&a[8]|128,o){i=i||0;for(var u=0;u<16;++u)o[i+u]=a[u];return o}return l(a)}try{n.name=t}catch(t){}return n.DNS=\"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",n.URL=\"6ba7b811-9dad-11d1-80b4-00c04fd430c8\",n}function g(t){return 14+(t+64>>>9<<4)+1}function w(t,r){var e=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(e>>16)<<16|65535&e}function m(t,r,e,n,o,i){return w((a=w(w(r,t),w(n,i)))<<(u=o)|a>>>32-u,e);var a,u}function A(t,r,e,n,o,i,a){return m(r&e|~r&n,t,r,o,i,a)}function _(t,r,e,n,o,i,a){return m(r&n|e&~n,t,r,o,i,a)}function k(t,r,e,n,o,i,a){return m(r^e^n,t,r,o,i,a)}function E(t,r,e,n,o,i,a){return m(e^(r|~n),t,r,o,i,a)}const O=y(\"v3\",48,(function(t){if(\"string\"==typeof t){var r=unescape(encodeURIComponent(t));t=new Uint8Array(r.length);for(var e=0;e<r.length;++e)t[e]=r.charCodeAt(e)}return function(t){for(var r=[],e=32*t.length,n=\"0123456789abcdef\",o=0;o<e;o+=8){var i=t[o>>5]>>>o%32&255,a=parseInt(n.charAt(i>>>4&15)+n.charAt(15&i),16);r.push(a)}return r}(function(t,r){t[r>>5]|=128<<r%32,t[g(r)-1]=r;for(var e=1732584193,n=-271733879,o=-1732584194,i=271733878,a=0;a<t.length;a+=16){var u=e,s=n,c=o,l=i;e=A(e,n,o,i,t[a],7,-680876936),i=A(i,e,n,o,t[a+1],12,-389564586),o=A(o,i,e,n,t[a+2],17,606105819),n=A(n,o,i,e,t[a+3],22,-1044525330),e=A(e,n,o,i,t[a+4],7,-176418897),i=A(i,e,n,o,t[a+5],12,1200080426),o=A(o,i,e,n,t[a+6],17,-1473231341),n=A(n,o,i,e,t[a+7],22,-45705983),e=A(e,n,o,i,t[a+8],7,1770035416),i=A(i,e,n,o,t[a+9],12,-1958414417),o=A(o,i,e,n,t[a+10],17,-42063),n=A(n,o,i,e,t[a+11],22,-1990404162),e=A(e,n,o,i,t[a+12],7,1804603682),i=A(i,e,n,o,t[a+13],12,-40341101),o=A(o,i,e,n,t[a+14],17,-1502002290),e=_(e,n=A(n,o,i,e,t[a+15],22,1236535329),o,i,t[a+1],5,-165796510),i=_(i,e,n,o,t[a+6],9,-1069501632),o=_(o,i,e,n,t[a+11],14,643717713),n=_(n,o,i,e,t[a],20,-373897302),e=_(e,n,o,i,t[a+5],5,-701558691),i=_(i,e,n,o,t[a+10],9,38016083),o=_(o,i,e,n,t[a+15],14,-660478335),n=_(n,o,i,e,t[a+4],20,-405537848),e=_(e,n,o,i,t[a+9],5,568446438),i=_(i,e,n,o,t[a+14],9,-1019803690),o=_(o,i,e,n,t[a+3],14,-187363961),n=_(n,o,i,e,t[a+8],20,1163531501),e=_(e,n,o,i,t[a+13],5,-1444681467),i=_(i,e,n,o,t[a+2],9,-51403784),o=_(o,i,e,n,t[a+7],14,1735328473),e=k(e,n=_(n,o,i,e,t[a+12],20,-1926607734),o,i,t[a+5],4,-378558),i=k(i,e,n,o,t[a+8],11,-2022574463),o=k(o,i,e,n,t[a+11],16,1839030562),n=k(n,o,i,e,t[a+14],23,-35309556),e=k(e,n,o,i,t[a+1],4,-1530992060),i=k(i,e,n,o,t[a+4],11,1272893353),o=k(o,i,e,n,t[a+7],16,-155497632),n=k(n,o,i,e,t[a+10],23,-1094730640),e=k(e,n,o,i,t[a+13],4,681279174),i=k(i,e,n,o,t[a],11,-358537222),o=k(o,i,e,n,t[a+3],16,-722521979),n=k(n,o,i,e,t[a+6],23,76029189),e=k(e,n,o,i,t[a+9],4,-640364487),i=k(i,e,n,o,t[a+12],11,-421815835),o=k(o,i,e,n,t[a+15],16,530742520),e=E(e,n=k(n,o,i,e,t[a+2],23,-995338651),o,i,t[a],6,-198630844),i=E(i,e,n,o,t[a+7],10,1126891415),o=E(o,i,e,n,t[a+14],15,-1416354905),n=E(n,o,i,e,t[a+5],21,-57434055),e=E(e,n,o,i,t[a+12],6,1700485571),i=E(i,e,n,o,t[a+3],10,-1894986606),o=E(o,i,e,n,t[a+10],15,-1051523),n=E(n,o,i,e,t[a+1],21,-2054922799),e=E(e,n,o,i,t[a+8],6,1873313359),i=E(i,e,n,o,t[a+15],10,-30611744),o=E(o,i,e,n,t[a+6],15,-1560198380),n=E(n,o,i,e,t[a+13],21,1309151649),e=E(e,n,o,i,t[a+4],6,-145523070),i=E(i,e,n,o,t[a+11],10,-1120210379),o=E(o,i,e,n,t[a+2],15,718787259),n=E(n,o,i,e,t[a+9],21,-343485551),e=w(e,u),n=w(n,s),o=w(o,c),i=w(i,l)}return[e,n,o,i]}(function(t){if(0===t.length)return[];for(var r=8*t.length,e=new Uint32Array(g(r)),n=0;n<r;n+=8)e[n>>5]|=(255&t[n/8])<<n%32;return e}(t),8*t.length))})),U=function(t,r,e){var n=(t=t||{}).random||(t.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,r){e=e||0;for(var o=0;o<16;++o)r[e+o]=n[o];return r}return l(n)};function x(t,r,e,n){switch(t){case 0:return r&e^~r&n;case 1:case 3:return r^e^n;case 2:return r&e^r&n^e&n}}function C(t,r){return t<<r|t>>>32-r}const j=y(\"v5\",80,(function(t){var r=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(\"string\"==typeof t){var n=unescape(encodeURIComponent(t));t=[];for(var o=0;o<n.length;++o)t.push(n.charCodeAt(o))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,a=Math.ceil(i/16),u=new Array(a),s=0;s<a;++s){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=t[64*s+4*l]<<24|t[64*s+4*l+1]<<16|t[64*s+4*l+2]<<8|t[64*s+4*l+3];u[s]=c}u[a-1][14]=8*(t.length-1)/Math.pow(2,32),u[a-1][14]=Math.floor(u[a-1][14]),u[a-1][15]=8*(t.length-1)&4294967295;for(var f=0;f<a;++f){for(var p=new Uint32Array(80),v=0;v<16;++v)p[v]=u[f][v];for(var h=16;h<80;++h)p[h]=C(p[h-3]^p[h-8]^p[h-14]^p[h-16],1);for(var d=e[0],b=e[1],y=e[2],g=e[3],w=e[4],m=0;m<80;++m){var A=Math.floor(m/20),_=C(d,5)+x(A,b,y,g)+w+r[A]+p[m]>>>0;w=g,g=y,y=C(b,30)>>>0,b=d,d=_}e[0]=e[0]+d>>>0,e[1]=e[1]+b>>>0,e[2]=e[2]+y>>>0,e[3]=e[3]+g>>>0,e[4]=e[4]+w>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,255&e[0],e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,255&e[1],e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,255&e[2],e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,255&e[3],e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,255&e[4]]})),I=\"00000000-0000-0000-0000-000000000000\",T=function(t){if(!u(t))throw TypeError(\"Invalid UUID\");return parseInt(t.substr(14,1),16)}}},r={};function e(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return t[n].call(i.exports,i,i.exports,e),i.exports}e.d=(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),e.r=t=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})};var n=e(122);self.eventBus=n.default})();"},{"name":"onGMCP","id":3,"type":"function","enabled":true,"code":"eventBus.raise('onGMCP', args);"}],"id":1}