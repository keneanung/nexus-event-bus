{"name":"eventbus","enabled":true,"description":"Event Bus similar to the Nexus function system, but available outside of the GUI","type":"group","items":[{"name":"onLoad","id":2,"type":"function","enabled":true,"code":"(()=>{\"use strict\";var r={517:function(r,t,e){var n=this&&this.__awaiter||function(r,t,e,n){return new(e||(e=Promise))((function(o,i){function a(r){try{u(n.next(r))}catch(r){i(r)}}function s(r){try{u(n.throw(r))}catch(r){i(r)}}function u(r){var t;r.done?o(r.value):(t=r.value,t instanceof e?t:new e((function(r){r(t)}))).then(a,s)}u((n=n.apply(r,t||[])).next())}))},o=this&&this.__generator||function(r,t){var e,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(e)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(e=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(r,a)}catch(r){i=[6,r],n=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.EventBus=void 0;var i=e(614),a=function(){for(var r=new Uint8Array(16),t=0;t<r.length;t++)r[t]=Math.floor(255*Math.random());return r},s=function(){function r(){this.subscriptions={},this.subscriptionsToAll=new Map}return r.prototype.subscribe=function(r,t,e,n){var o;void 0===e&&(e=(0,i.v4)({rng:a})),void 0===n&&(n=!1),\"*\"===r?o=this.subscriptionsToAll:(void 0===this.subscriptions[r]&&(this.subscriptions[r]=new Map),o=this.subscriptions[r]),this.subscribeToEvent(o,t,r,e,n)},r.prototype.subscribeToEvent=function(r,t,e,n,o){if(r.has(n)&&!o)throw new Error('Callback \"'.concat(n,'\" already exists for event \"').concat(e,'\"'));r.set(n,t)},r.prototype.raise=function(r,t){return n(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=this.subscriptions[r],[4,this.runCallbacks(e,t)];case 1:return n.sent(),[4,this.runCallbacks(this.subscriptionsToAll,t)];case 2:return n.sent(),[2]}}))}))},r.prototype.runCallbacks=function(r,t){return n(this,void 0,void 0,(function(){var e,n,i,a,s;return o(this,(function(o){switch(o.label){case 0:if(void 0===r)return[3,6];e=r.values(),n=0,i=Array.from(e),o.label=1;case 1:if(!(n<i.length))return[3,6];a=i[n],o.label=2;case 2:return o.trys.push([2,4,,5]),[4,a(t)];case 3:return o.sent(),[3,5];case 4:return s=o.sent(),console.error(s),[3,5];case 5:return n++,[3,1];case 6:return[2]}}))}))},r.prototype.unsubscribe=function(r,t){var e;if(\"*\"===r)e=this.subscriptionsToAll;else{if(void 0===this.subscriptions[r])return;e=this.subscriptions[r]}this.unsubscribeFromEvent(e,t)},r.prototype.unsubscribeFromEvent=function(r,t){if(\"string\"==typeof t)r.delete(t);else for(var e=r.keys(),n=0,o=Array.from(e);n<o.length;n++){var i=o[n];r.get(i)===t&&r.delete(i)}},r.prototype.getSubscribers=function(r){var t=this,e=[],n=function(r,t){var n=t.get(r);void 0!==n&&e.push({callback:n,name:r})};if(\"*\"!==r){var o=this.subscriptions[r];void 0!==o&&o.forEach((function(r,t){return n(t,o)}))}return this.subscriptionsToAll.forEach((function(r,e){return n(e,t.subscriptionsToAll)})),e},r}();t.EventBus=s},607:function(r,t,e){var n=this&&this.__createBinding||(Object.create?function(r,t,e,n){void 0===n&&(n=e);var o=Object.getOwnPropertyDescriptor(t,e);o&&!(\"get\"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(r,n,o)}:function(r,t,e,n){void 0===n&&(n=e),r[n]=t[e]}),o=this&&this.__exportStar||function(r,t){for(var e in r)\"default\"===e||Object.prototype.hasOwnProperty.call(t,e)||n(t,r,e)};Object.defineProperty(t,\"__esModule\",{value:!0}),o(e(517),t)},614:(r,t,e)=>{var n;e.r(t),e.d(t,{NIL:()=>O,parse:()=>b,stringify:()=>l,v1:()=>d,v3:()=>U,v4:()=>I,v5:()=>k,validate:()=>s,version:()=>S});var o=new Uint8Array(16);function i(){if(!n&&!(n=\"undefined\"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||\"undefined\"!=typeof msCrypto&&\"function\"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");return n(o)}const a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(r){return\"string\"==typeof r&&a.test(r)};for(var u=[],c=0;c<256;++c)u.push((c+256).toString(16).substr(1));const l=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(u[r[t+0]]+u[r[t+1]]+u[r[t+2]]+u[r[t+3]]+\"-\"+u[r[t+4]]+u[r[t+5]]+\"-\"+u[r[t+6]]+u[r[t+7]]+\"-\"+u[r[t+8]]+u[r[t+9]]+\"-\"+u[r[t+10]]+u[r[t+11]]+u[r[t+12]]+u[r[t+13]]+u[r[t+14]]+u[r[t+15]]).toLowerCase();if(!s(e))throw TypeError(\"Stringified UUID is invalid\");return e};var f,p,v=0,h=0;const d=function(r,t,e){var n=t&&e||0,o=t||new Array(16),a=(r=r||{}).node||f,s=void 0!==r.clockseq?r.clockseq:p;if(null==a||null==s){var u=r.random||(r.rng||i)();null==a&&(a=f=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=p=16383&(u[6]<<8|u[7]))}var c=void 0!==r.msecs?r.msecs:Date.now(),d=void 0!==r.nsecs?r.nsecs:h+1,b=c-v+(d-h)/1e4;if(b<0&&void 0===r.clockseq&&(s=s+1&16383),(b<0||c>v)&&void 0===r.nsecs&&(d=0),d>=1e4)throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");v=c,h=d,p=s;var y=(1e4*(268435455&(c+=122192928e5))+d)%4294967296;o[n++]=y>>>24&255,o[n++]=y>>>16&255,o[n++]=y>>>8&255,o[n++]=255&y;var g=c/4294967296*1e4&268435455;o[n++]=g>>>8&255,o[n++]=255&g,o[n++]=g>>>24&15|16,o[n++]=g>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(var w=0;w<6;++w)o[n+w]=a[w];return t||l(o)},b=function(r){if(!s(r))throw TypeError(\"Invalid UUID\");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=255&t,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=255&t,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=255&t,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=255&t,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=255&t,e};function y(r,t,e){function n(r,n,o,i){if(\"string\"==typeof r&&(r=function(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}(r)),\"string\"==typeof n&&(n=b(n)),16!==n.length)throw TypeError(\"Namespace must be array-like (16 iterable integer values, 0-255)\");var a=new Uint8Array(16+r.length);if(a.set(n),a.set(r,n.length),(a=e(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,o){i=i||0;for(var s=0;s<16;++s)o[i+s]=a[s];return o}return l(a)}try{n.name=r}catch(r){}return n.DNS=\"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",n.URL=\"6ba7b811-9dad-11d1-80b4-00c04fd430c8\",n}function g(r){return 14+(r+64>>>9<<4)+1}function w(r,t){var e=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(e>>16)<<16|65535&e}function m(r,t,e,n,o,i){return w((a=w(w(t,r),w(n,i)))<<(s=o)|a>>>32-s,e);var a,s}function A(r,t,e,n,o,i,a){return m(t&e|~t&n,r,t,o,i,a)}function E(r,t,e,n,o,i,a){return m(t&n|e&~n,r,t,o,i,a)}function _(r,t,e,n,o,i,a){return m(t^e^n,r,t,o,i,a)}function C(r,t,e,n,o,i,a){return m(e^(t|~n),r,t,o,i,a)}const U=y(\"v3\",48,(function(r){if(\"string\"==typeof r){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return function(r){for(var t=[],e=32*r.length,n=\"0123456789abcdef\",o=0;o<e;o+=8){var i=r[o>>5]>>>o%32&255,a=parseInt(n.charAt(i>>>4&15)+n.charAt(15&i),16);t.push(a)}return t}(function(r,t){r[t>>5]|=128<<t%32,r[g(t)-1]=t;for(var e=1732584193,n=-271733879,o=-1732584194,i=271733878,a=0;a<r.length;a+=16){var s=e,u=n,c=o,l=i;e=A(e,n,o,i,r[a],7,-680876936),i=A(i,e,n,o,r[a+1],12,-389564586),o=A(o,i,e,n,r[a+2],17,606105819),n=A(n,o,i,e,r[a+3],22,-1044525330),e=A(e,n,o,i,r[a+4],7,-176418897),i=A(i,e,n,o,r[a+5],12,1200080426),o=A(o,i,e,n,r[a+6],17,-1473231341),n=A(n,o,i,e,r[a+7],22,-45705983),e=A(e,n,o,i,r[a+8],7,1770035416),i=A(i,e,n,o,r[a+9],12,-1958414417),o=A(o,i,e,n,r[a+10],17,-42063),n=A(n,o,i,e,r[a+11],22,-1990404162),e=A(e,n,o,i,r[a+12],7,1804603682),i=A(i,e,n,o,r[a+13],12,-40341101),o=A(o,i,e,n,r[a+14],17,-1502002290),e=E(e,n=A(n,o,i,e,r[a+15],22,1236535329),o,i,r[a+1],5,-165796510),i=E(i,e,n,o,r[a+6],9,-1069501632),o=E(o,i,e,n,r[a+11],14,643717713),n=E(n,o,i,e,r[a],20,-373897302),e=E(e,n,o,i,r[a+5],5,-701558691),i=E(i,e,n,o,r[a+10],9,38016083),o=E(o,i,e,n,r[a+15],14,-660478335),n=E(n,o,i,e,r[a+4],20,-405537848),e=E(e,n,o,i,r[a+9],5,568446438),i=E(i,e,n,o,r[a+14],9,-1019803690),o=E(o,i,e,n,r[a+3],14,-187363961),n=E(n,o,i,e,r[a+8],20,1163531501),e=E(e,n,o,i,r[a+13],5,-1444681467),i=E(i,e,n,o,r[a+2],9,-51403784),o=E(o,i,e,n,r[a+7],14,1735328473),e=_(e,n=E(n,o,i,e,r[a+12],20,-1926607734),o,i,r[a+5],4,-378558),i=_(i,e,n,o,r[a+8],11,-2022574463),o=_(o,i,e,n,r[a+11],16,1839030562),n=_(n,o,i,e,r[a+14],23,-35309556),e=_(e,n,o,i,r[a+1],4,-1530992060),i=_(i,e,n,o,r[a+4],11,1272893353),o=_(o,i,e,n,r[a+7],16,-155497632),n=_(n,o,i,e,r[a+10],23,-1094730640),e=_(e,n,o,i,r[a+13],4,681279174),i=_(i,e,n,o,r[a],11,-358537222),o=_(o,i,e,n,r[a+3],16,-722521979),n=_(n,o,i,e,r[a+6],23,76029189),e=_(e,n,o,i,r[a+9],4,-640364487),i=_(i,e,n,o,r[a+12],11,-421815835),o=_(o,i,e,n,r[a+15],16,530742520),e=C(e,n=_(n,o,i,e,r[a+2],23,-995338651),o,i,r[a],6,-198630844),i=C(i,e,n,o,r[a+7],10,1126891415),o=C(o,i,e,n,r[a+14],15,-1416354905),n=C(n,o,i,e,r[a+5],21,-57434055),e=C(e,n,o,i,r[a+12],6,1700485571),i=C(i,e,n,o,r[a+3],10,-1894986606),o=C(o,i,e,n,r[a+10],15,-1051523),n=C(n,o,i,e,r[a+1],21,-2054922799),e=C(e,n,o,i,r[a+8],6,1873313359),i=C(i,e,n,o,r[a+15],10,-30611744),o=C(o,i,e,n,r[a+6],15,-1560198380),n=C(n,o,i,e,r[a+13],21,1309151649),e=C(e,n,o,i,r[a+4],6,-145523070),i=C(i,e,n,o,r[a+11],10,-1120210379),o=C(o,i,e,n,r[a+2],15,718787259),n=C(n,o,i,e,r[a+9],21,-343485551),e=w(e,s),n=w(n,u),o=w(o,c),i=w(i,l)}return[e,n,o,i]}(function(r){if(0===r.length)return[];for(var t=8*r.length,e=new Uint32Array(g(t)),n=0;n<t;n+=8)e[n>>5]|=(255&r[n/8])<<n%32;return e}(r),8*r.length))})),I=function(r,t,e){var n=(r=r||{}).random||(r.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){e=e||0;for(var o=0;o<16;++o)t[e+o]=n[o];return t}return l(n)};function M(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:case 3:return t^e^n;case 2:return t&e^t&n^e&n}}function T(r,t){return r<<t|r>>>32-t}const k=y(\"v5\",80,(function(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(\"string\"==typeof r){var n=unescape(encodeURIComponent(r));r=[];for(var o=0;o<n.length;++o)r.push(n.charCodeAt(o))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,a=Math.ceil(i/16),s=new Array(a),u=0;u<a;++u){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=r[64*u+4*l]<<24|r[64*u+4*l+1]<<16|r[64*u+4*l+2]<<8|r[64*u+4*l+3];s[u]=c}s[a-1][14]=8*(r.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(r.length-1)&4294967295;for(var f=0;f<a;++f){for(var p=new Uint32Array(80),v=0;v<16;++v)p[v]=s[f][v];for(var h=16;h<80;++h)p[h]=T(p[h-3]^p[h-8]^p[h-14]^p[h-16],1);for(var d=e[0],b=e[1],y=e[2],g=e[3],w=e[4],m=0;m<80;++m){var A=Math.floor(m/20),E=T(d,5)+M(A,b,y,g)+w+t[A]+p[m]>>>0;w=g,g=y,y=T(b,30)>>>0,b=d,d=E}e[0]=e[0]+d>>>0,e[1]=e[1]+b>>>0,e[2]=e[2]+y>>>0,e[3]=e[3]+g>>>0,e[4]=e[4]+w>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,255&e[0],e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,255&e[1],e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,255&e[2],e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,255&e[3],e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,255&e[4]]})),O=\"00000000-0000-0000-0000-000000000000\",S=function(r){if(!s(r))throw TypeError(\"Invalid UUID\");return parseInt(r.substr(14,1),16)}}},t={};function e(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return r[n].call(i.exports,i,i.exports,e),i.exports}e.d=(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},e.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),e.r=r=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(r,\"__esModule\",{value:!0})};var n={};(()=>{var r=n,t=e(607);if(console.log(\"loading event bus version 0.3.0...\"),\"function\"!=typeof Map){var o=document.createElement(\"iframe\"),i=document.getElementById(\"tab_content_main_output\");null==i||i.appendChild(o),Map=o.contentWindow.Map,null==i||i.removeChild(o)}var a=new t.EventBus;r.default=a,console.log(\"event bus loaded.\")})(),self.eventBus=n.default})();"},{"name":"onGMCP","id":3,"type":"function","enabled":true,"code":"eventBus.raise('onGMCP', args);\neventBus.raise(args.gmcp_method, args.gmcp_args);\n"}],"id":1}