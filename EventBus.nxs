{"name":"eventbus","enabled":true,"description":"Event Bus similar to the Nexus function system, but available outside of the GUI","type":"group","items":[{"name":"onLoad","id":2,"type":"function","enabled":true,"code":"(()=>{\"use strict\";var t={d:(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n)},n={};t.d(n,{default:()=>s});var e=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,u)}c((r=r.apply(t,n||[])).next())}))},r=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},o=function(){function t(){this.subscriptions={},this.subscriptionsToAll=[]}return t.prototype.subscribe=function(t,n){var e;\"*\"===t?e=this.subscriptionsToAll:(void 0===this.subscriptions[t]&&(this.subscriptions[t]=[]),e=this.subscriptions[t]),this.subscribeToEvent(e,n)},t.prototype.subscribeToEvent=function(t,n){t.push(n)},t.prototype.raise=function(t,n){return e(this,void 0,void 0,(function(){var e;return r(this,(function(r){return e=this.subscriptions[t],this.runCallbacks(e,n),this.runCallbacks(this.subscriptionsToAll,n),[2]}))}))},t.prototype.runCallbacks=function(t,n){var o=this;void 0!==t&&t.forEach((function(t){return e(o,void 0,void 0,(function(){var e;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t(n)];case 1:return r.sent(),[3,3];case 2:return e=r.sent(),console.error(e),[3,3];case 3:return[2]}}))}))}))},t.prototype.unsubscribe=function(t,n){var e;if(\"*\"===t)e=this.subscriptionsToAll;else{if(void 0===this.subscriptions[t])return;e=this.subscriptions[t]}this.unsubscribeFromEvent(e,n)},t.prototype.unsubscribeFromEvent=function(t,n){var e=t.indexOf(n,0);e>-1&&t.splice(e,1)},t}();console.log(\"loading event bus...\");var i=new o;i.subscribe(\"onGMCP\",(function(t){return n=void 0,e=void 0,o=function(){return function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(n){switch(n.label){case 0:return[4,i.raise(t.gmcp_method,t.gmcp_args)];case 1:return n.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(t,i){function s(t){try{c(o.next(t))}catch(t){i(t)}}function u(t){try{c(o.throw(t))}catch(t){i(t)}}function c(n){var e;n.done?t(n.value):(e=n.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}c((o=o.apply(n,e||[])).next())}));var n,e,r,o}));const s=i;console.log(\"event bus loaded.\"),self.eventBus=n.default})();"},{"name":"onGMCP","id":3,"type":"function","enabled":true,"code":"eventBus.raise('onGMCP', args);"}],"id":1}