"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[258],{3905:function(e,n,t){t.d(n,{Zo:function(){return l},kt:function(){return b}});var r=t(7294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e,n){if(null==e)return{};var t,r,s=function(e,n){if(null==e)return{};var t,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var i=r.createContext({}),a=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},l=function(e){var n=a(e.components);return r.createElement(i.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},f=r.forwardRef((function(e,n){var t=e.components,s=e.mdxType,o=e.originalType,i=e.parentName,l=u(e,["components","mdxType","originalType","parentName"]),f=a(t),b=s,v=f["".concat(i,".").concat(b)]||f[b]||p[b]||o;return t?r.createElement(v,c(c({ref:n},l),{},{components:t})):r.createElement(v,c({ref:n},l))}));function b(e,n){var t=arguments,s=n&&n.mdxType;if("string"==typeof e||s){var o=t.length,c=new Array(o);c[0]=f;var u={};for(var i in n)hasOwnProperty.call(n,i)&&(u[i]=n[i]);u.originalType=e,u.mdxType="string"==typeof e?e:s,c[1]=u;for(var a=2;a<o;a++)c[a]=t[a];return r.createElement.apply(null,c)}return r.createElement.apply(null,t)}f.displayName="MDXCreateElement"},8494:function(e,n,t){t.r(n),t.d(n,{assets:function(){return l},contentTitle:function(){return i},default:function(){return b},frontMatter:function(){return u},metadata:function(){return a},toc:function(){return p}});var r=t(7462),s=t(3366),o=(t(7294),t(3905)),c=["components"],u={id:"best_practices",sidebar_position:5},i="Best Practices",a={unversionedId:"best_practices",id:"best_practices",title:"Best Practices",description:"The use of anonymous or local functions",source:"@site/docs/best_practices.md",sourceDirName:".",slug:"/best_practices",permalink:"/@keneanung/nexus-event-bus/docs/best_practices",editUrl:"https://github.com/keneanung/nexus-event-bus/edit/development/website/docs/best_practices.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"best_practices",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"API",permalink:"/@keneanung/nexus-event-bus/docs/api"}},l={},p=[{value:"The use of anonymous or local functions",id:"the-use-of-anonymous-or-local-functions",level:2},{value:"One Shot Handlers",id:"one-shot-handlers",level:2}],f={toc:p};function b(e){var n=e.components,t=(0,s.Z)(e,c);return(0,o.kt)("wrapper",(0,r.Z)({},f,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"best-practices"},"Best Practices"),(0,o.kt)("h2",{id:"the-use-of-anonymous-or-local-functions"},"The use of anonymous or local functions"),(0,o.kt)("p",null,"Use anonymous or local functions only, if you don't intend to unsibscribe them again as the function reference is lost after leaving the function. The following examples illustrate the problem:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"eventBus.subscribe('testEvent', () => {\n  console.log('testEvent');\n});\n\neventBus.unsubscribe('testEvent', () => {\n  console.log('testEvent');\n});\n\neventBus.raise('testEvent'); // prints 'testEvent'\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const sub = () => {\n  const func = () => {\n    console.log('testEvent');\n  };\n  eventBus.subscribe('testEvent', func);\n}\n\nconst unsub = () => {\n  const func = () => {\n    console.log('testEvent');\n  };\n  eventBus.unsubscribe('testEvent', func);\n}\n\nsub();\nunsub();\neventBus.raise('testEvent'); // prints 'testEvent'\n")),(0,o.kt)("p",null,"To fix this, keep the function reference outside the local scope:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const func = () => {\n  console.log('testEvent');\n};\n\nconst sub = () => {\n  eventBus.subscribe('testEvent', func);\n}\n\nconst unsub = () => {\n  eventBus.unsubscribe('testEvent', func);\n}\n\nsub();\nunsub();\neventBus.raise('testEvent'); // prints nothing\n")),(0,o.kt)("h2",{id:"one-shot-handlers"},"One Shot Handlers"),(0,o.kt)("p",null,"You can use local functions as one shot handlers like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const func = () => {\n  console.log('testEvent');\n  eventBus.unsubscribe('testEvent', func);\n};\neventBus.subscribe('testEvent', func);\neventBus.raise('testEvent'); // prints 'testEvent'\neventBus.raise('testEvent'); // prints nothing\n")))}b.isMDXComponent=!0}}]);